// Sample projects data (expanded for demonstration)
        const projects = [
            {
                id: 1,
                title: "Aluminium Works",
                category: "aluminium",
                image: "./assets/portfolio/aluminium works/1.jpeg"
            },
            {
                id: 2,
                title: "Aluminium Works",
                category: "aluminium",
                image: "./assets/portfolio/aluminium works/2.jpeg"
            },
            {
                id: 3,
                title: "Aluminium Works",
                category: "aluminium",
                image: "./assets/portfolio/aluminium works/3.jpeg"
            },
            {
                id: 4,
                title: "Aluminium Works",
                category: "aluminium",
                image: "./assets/portfolio/aluminium works/4.jpeg"
            },
            {
                id: 5,
                title: "Aluminium Works",
                category: "aluminium",
                image: "./assets/portfolio/aluminium works/5.jpeg"
            },
            {
                id: 6,
                title: "Aluminium Works",
                category: "aluminium",
                image: "./assets/portfolio/aluminium works/6.jpeg"
            },
            {
                id: 7,
                title: "Aluminium Works",
                category: "aluminium",
                image: "./assets/portfolio/aluminium works/7.jpeg"
            },
            {
                id: 8,
                title: "Aluminium Works",
                category: "aluminium",
                image: "./assets/portfolio/aluminium works/8.jpeg"
            },
            {
                id: 9,
                title: "Aluminium Works",
                category: "aluminium",
                image: "./assets/portfolio/aluminium works/9.jpeg"
            },
            {
                id: 10,
                title: "Aluminium Works",
                category: "aluminium",
                image: "./assets/portfolio/aluminium works/10.jpeg"
            },
            {
                id: 11,
                title: "Aluminium Works",
                category: "aluminium",
                image: "./assets/portfolio/aluminium works/11.jpeg"
            },
            {
                id: 12,
                title: "Aluminium Works",
                category: "aluminium",
                image: "./assets/portfolio/aluminium works/12.jpeg"
            },
            {
                id: 13,
                title: "Aluminium Works",
                category: "aluminium",
                image: "./assets/portfolio/aluminium works/13.jpeg"
            },
            {
                id: 14,
                title: "Aluminium Works",
                category: "aluminium",
                image: "./assets/portfolio/aluminium works/14.jpeg"
            },
            {
                id: 15,
                title: "Security Burglars",
                category: "security",
                image: "./assets/portfolio/security burglars/1.jpeg"
            },
            {
                id: 16,
                title: "Security Burglars",
                category: "security",
                image: "./assets/portfolio/security burglars/2.jpeg"
            },
            {
                id: 17,
                title: "Security Burglars",
                category: "security",
                image: "./assets/portfolio/security burglars/3.jpeg"
            },
            {
                id: 18,
                title: "Security Burglars",
                category: "security",
                image: "./assets/portfolio/security burglars/4.jpeg"
            },
            {
                id: 19,
                title: "Security Burglars",
                category: "security",
                image: "./assets/portfolio/security burglars/5.jpeg"
            },
            {
                id: 20,
                title: "Security Burglars",
                category: "security",
                image: "./assets/portfolio/security burglars/6.jpeg"
            },
            {
                id: 21,
                title: "Security Burglars",
                category: "security",
                image: "./assets/portfolio/security burglars/7.jpeg"
            },
            {
                id: 22,
                title: "Security Burglars",
                category: "security",
                image: "./assets/portfolio/security burglars/8.jpeg"
            },
            {
                id: 23,
                title: "Security Burglars",
                category: "security",
                image: "./assets/portfolio/security burglars/9.jpeg"
            },
            {
                id: 24,
                title: "Security Burglars",
                category: "security",
                image: "./assets/portfolio/security burglars/10.jpeg"
            },
            {
                id: 25,
                title: "Security Burglars",
                category: "security",
                image: "./assets/portfolio/security burglars/11.jpeg"
            },
            {
                id: 26,
                title: "Security Burglars",
                category: "security",
                image: "./assets/portfolio/security burglars/12.jpeg"
            },
            {
                id: 27,
                title: "Security Burglars",
                category: "security",
                image: "./assets/portfolio/security burglars/13.jpeg"
            },
            {
                id: 28,
                title: "Security Burglars",
                category: "security",
                image: "./assets/portfolio/security burglars/14.jpeg"
            },
            {
                id: 29,
                title: "Stainless Steel Handrails",
                category: "handrails",
                image: "./assets/portfolio/handrails/1.jpeg"
            },
            {
                id: 30,
                title: "Stainless Steel Handrails",
                category: "handrails",
                image: "./assets/portfolio/handrails/2.jpeg"
            },
            {
                id: 31,
                title: "Stainless Steel Handrails",
                category: "handrails",
                image: "./assets/portfolio/handrails/3.jpeg"
            },
            {
                id: 32,
                title: "Stainless Steel Handrails",
                category: "handrails",
                image: "./assets/portfolio/handrails/4.jpeg"
            },
            {
                id: 33,
                title: "Stainless Steel Handrails",
                category: "handrails",
                image: "./assets/portfolio/handrails/5.jpeg"
            },
            {
                id: 34,
                title: "Stainless Steel Handrails",
                category: "handrails",
                image: "./assets/portfolio/handrails/6.jpeg"
            },
            {
                id: 36,
                title: "Stainless Steel Handrails",
                category: "handrails",
                image: "./assets/portfolio/handrails/7.jpeg"
            },
            {
                id: 36,
                title: "Stainless Steel Handrails",
                category: "handrails",
                image: "./assets/portfolio/handrails/8.jpeg"
            },
            {
                id: 37,
                title: "Stainless Steel Handrails",
                category: "handrails",
                image: "./assets/portfolio/handrails/9.jpeg"
            },
            {
                id: 38,
                title: "Stainless Steel Handrails",
                category: "handrails",
                image: "./assets/portfolio/handrails/10.jpeg"
            },
            {
                id: 39,
                title: "Stainless Steel Handrails",
                category: "handrails",
                image: "./assets/portfolio/handrails/11.jpeg"
            },
            {
                id: 40,
                title: "Stainless Steel Handrails",
                category: "handrails",
                image: "./assets/portfolio/security burglars/14.jpeg"
            },
            {
                id: 41,
                title: "Garage Doors",
                category: "garage",
                image: "./assets/portfolio/garage doors/1.jpeg"
            },
            {
                id: 42,
                title: "Garage Doors",
                category: "garage",
                image: "./assets/portfolio/garage doors/2.jpeg"
            },
            {
                id: 43,
                title: "Garage Doors",
                category: "garage",
                image: "./assets/portfolio/garage doors/3.jpeg"
            },
            {
                id: 44,
                title: "Garage Doors",
                category: "garage",
                image: "./assets/portfolio/garage doors/1.jpeg"
            },
            {
                id: 45,
                title: "Garage Doors",
                category: "garage",
                image: "./assets/portfolio/garage doors/1.jpeg"
            },
            {
                id: 46,
                title: "Roller Shutter Doors",
                category: "roller-door",
                image: "./assets/portfolio/roller doors/1.jpeg"
            },
            {
                id: 47,
                title: "Roller Shutter Doors",
                category: "roller-door",
                image: "./assets/portfolio/roller doors/2.jpeg"
            },
            {
                id: 48,
                title: "Roller Shutter Doors",
                category: "roller-door",
                image: "./assets/portfolio/roller doors/3.jpeg"
            },
            {
                id: 49,
                title: "Roller Shutter Doors",
                category: "roller-door",
                image: "./assets/portfolio/roller doors/4.jpeg"
            },
            {
                id: 50,
                title: "Roller Shutter Doors",
                category: "roller-door",
                image: "./assets/portfolio/roller doors/5.jpeg"
            },
            {
                id: 51,
                title: "Roller Shutter Doors",
                category: "roller-door",
                image: "./assets/portfolio/roller doors/7.jpeg"
            },
            {
                id: 52,
                title: "Roller Shutter Doors",
                category: "roller-door",
                image: "./assets/portfolio/roller doors/8.jpeg"
            },
            {
                id: 53,
                title: "Roller Shutter Doors",
                category: "roller-door",
                image: "./assets/portfolio/roller doors/9.jpeg"
            },
            {
                id: 54,
                title: "Office Partitions",
                category: "office",
                image: "./assets/portfolio/office partitions/1.jpeg"
            },
            {
                id: 55,
                title: "Office Partitions",
                category: "office",
                image: "./assets/portfolio/office partitions/2.jpeg"
            },
            {
                id: 56,
                title: "Office Partitions",
                category: "office",
                image: "./assets/portfolio/office partitions/3.jpeg"
            },
            {
                id: 57,
                title: "Office Partitions",
                category: "office",
                image: "./assets/portfolio/office partitions/4.jpeg"
            },
            {
                id: 58,
                title: "Office Partitions",
                category: "office",
                image: "./assets/portfolio/office partitions/5.jpeg"
            },
            {
                id: 59,
                title: "Office Partitions",
                category: "office",
                image: "./assets/portfolio/office partitions/6.jpeg"
            },
            {
                id: 60,
                title: "Office Partitions",
                category: "office",
                image: "./assets/portfolio/office partitions/7.jpeg"
            },
            {
                id: 61,
                title: "Office Partitions",
                category: "office",
                image: "./assets/portfolio/office partitions/8.jpeg"
            },
            {
                id: 62,
                title: "Office Partitions",
                category: "office",
                image: "./assets/portfolio/office partitions/9.jpeg"
            },
            {
                id: 63,
                title: "Office Partitions",
                category: "office",
                image: "./assets/portfolio/office partitions/10.jpeg"
            },
            {
                id: 64,
                title: "Office Partitions",
                category: "office",
                image: "./assets/portfolio/office partitions/11.jpeg"
            },
            {
                id: 65,
                title: "Office Partitions",
                category: "office",
                image: "./assets/portfolio/office partitions/12.jpeg"
            },
            {
                id: 66,
                title: "Office Partitions",
                category: "office",
                image: "./assets/portfolio/office partitions/14.jpeg"
            },
            {
                id: 67,
                title: "Office Partitions",
                category: "office",
                image: "./assets/portfolio/office partitions/15.jpeg"
            },
            {
                id: 68,
                title: "Office Partitions",
                category: "office",
                image: "./assets/portfolio/office partitions/16.jpeg"
            },
            {
                id: 69,
                title: "Office Partitions",
                category: "office",
                image: "./assets/portfolio/office partitions/17.jpeg"
            },
            {
                id: 70,
                title: "Office Partitions",
                category: "office",
                image: "./assets/portfolio/office partitions/18.jpeg"
            },
            {
                id: 71,
                title: "Office Partitions",
                category: "office",
                image: "./assets/portfolio/office partitions/19.jpeg"
            }

        ];

        // Filter categories - first 4 are shown directly, rest in modal
        const allFilters = [
            { key: 'all', label: 'All Projects' },
            { key: 'aluminium', label: 'Aluminium Works' },
            { key: 'security', label: 'Security Burglars' },
            { key: 'handrails', label: 'Stainless Steel Handrails' },
            { key: 'office', label: 'Office Partitions' },
            { key: 'garage', label: 'Garage Doors' },
            { key: 'cubicle', label: 'Shower Cubicles' },
            { key: 'roller-door', label: 'Roller Shutter Doors' },
            { key: 'carpentry', label: 'Carpentry Works' },
            { key: 'plumbing', label: 'Plumbing Works' },
        ];

        let displayedProjects = 6;
        let currentFilter = 'all';

        function createGalleryItem(project) {
            return `
                <div class="gallery-item" data-category="${project.category}">
                    <img src="${project.image}" alt="${project.title}" loading="lazy">
                    <div class="gallery-overlay">
                        <h3>${project.title}</h3>
                    </div>
                </div>
            `;
        }

        function renderGallery() {
            const gallery = document.getElementById('gallery');
            const filteredProjects = currentFilter === 'all' 
                ? projects.slice(0, displayedProjects)
                : projects.filter(p => p.category === currentFilter).slice(0, displayedProjects);
            
            gallery.innerHTML = filteredProjects.map(createGalleryItem).join('');
            
            // Update load more button visibility
            const loadMoreBtn = document.getElementById('loadMore');
            const totalFiltered = currentFilter === 'all' ? projects.length : projects.filter(p => p.category === currentFilter).length;
            loadMoreBtn.style.display = displayedProjects >= totalFiltered ? 'none' : 'block';
        }

        function filterProjects(category) {
            currentFilter = category;
            displayedProjects = 6;
            
            // Update active filter button (only for main tabs)
            document.querySelectorAll('.gallery-filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            const activeBtn = document.querySelector(`[data-filter="${category}"]`);
            if (activeBtn) {
                activeBtn.classList.add('active');
            }
            
            // Add animation delay for smooth transition
            const items = document.querySelectorAll('.gallery-item');
            items.forEach(item => item.classList.add('hidden'));
            
            setTimeout(() => {
                renderGallery();
            }, 300);
        }

        function loadMore() {
            displayedProjects += 3;
            renderGallery();
        }

        function populateModal() {
            const modalFilters = document.getElementById('modalFilters');
            // Skip the first 4 filters as they're already in the main tabs
            const additionalFilters = allFilters.slice(4);
            
            modalFilters.innerHTML = additionalFilters.map(filter => `
                <button class="modal-filter-btn" data-filter="${filter.key}">
                    ${filter.label}
                </button>
            `).join('');
            
            // Add event listeners to modal filter buttons
            modalFilters.querySelectorAll('.modal-filter-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    filterProjects(btn.dataset.filter);
                    closeModal();
                });
            });
        }

        function openModal() {
            document.getElementById('filterModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            document.getElementById('filterModal').classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Event listeners
        document.querySelectorAll('.gallery-filter-btn').forEach(btn => {
            if (btn.id !== 'viewMoreBtn') {
                btn.addEventListener('click', () => {
                    filterProjects(btn.dataset.filter);
                });
            }
        });

        document.getElementById('viewMoreBtn').addEventListener('click', openModal);
        document.getElementById('closeModal').addEventListener('click', closeModal);
        document.getElementById('filterModal').addEventListener('click', (e) => {
            if (e.target.id === 'filterModal') {
                closeModal();
            }
        });

        document.getElementById('loadMore').addEventListener('click', loadMore);

        // Handle ESC key to close modal
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeModal();
            }
        });

        // Initialize
        populateModal();
        renderGallery();

        // Add smooth scroll animation on load
        window.addEventListener('load', () => {
            const items = document.querySelectorAll('.gallery-item');
            items.forEach((item, index) => {
                setTimeout(() => {
                    item.style.opacity = '1';
                    item.style.transform = 'translateY(0)';
                }, index * 100);
            });
        });